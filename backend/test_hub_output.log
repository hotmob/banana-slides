2025-12-25 18:47:52,300 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - Hugging Face Inpainting Hub Provider åˆå§‹åŒ– (æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting)
2025-12-25 18:47:52,300 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ Hugging Face Hub Inference API
2025-12-25 18:47:52,300 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“¦ å‡†å¤‡å›¾ç‰‡...
2025-12-25 18:47:52,438 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - è°ƒæ•´å›¾ç‰‡å¤§å°: (1024, 571)
2025-12-25 18:47:52,459 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âœ… å›¾ç‰‡å‡†å¤‡å®Œæˆ: å°ºå¯¸=(1024, 571)
2025-12-25 18:47:52,460 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“ Prompt: clean background, natural, high quality, seamless
2025-12-25 18:47:52,460 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âš™ï¸ è°ƒç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting
2025-12-25 18:47:53,913 - httpx - INFO - HTTP Request: GET https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping "HTTP/1.1 401 Unauthorized"
2025-12-25 18:47:53,913 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ Inpainting å¤±è´¥: 401 Client Error. (Request ID: Root=1-694d1659-2f4a9e0a284b28be4dd2dfdf;0032335d-f408-4614-9f45-405414e4f90a)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 657, in hf_raise_for_status
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/backend/services/ai_providers/image/huggingface_inpainting_hub_provider.py", line 119, in inpaint_image
    result = self.client.image_to_image(
        image=processed_image,
    ...<6 lines>...
        strength=strength
    )
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_client.py", line 1329, in image_to_image
    provider_helper = get_provider_helper(self.provider, task="image-to-image", model=model_id)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/__init__.py", line 251, in get_provider_helper
    provider_mapping = _fetch_inference_provider_mapping(model)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/_common.py", line 347, in _fetch_inference_provider_mapping
    info = HfApi().model_info(model, expand=["inferenceProviderMapping"])
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_validators.py", line 89, in _inner_fn
    return fn(*args, **kwargs)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/hf_api.py", line 2626, in model_info
    hf_raise_for_status(r)
    ~~~~~~~~~~~~~~~~~~~^^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 710, in hf_raise_for_status
    raise _format(RepositoryNotFoundError, message, response) from e
huggingface_hub.errors.RepositoryNotFoundError: 401 Client Error. (Request ID: Root=1-694d1659-2f4a9e0a284b28be4dd2dfdf;0032335d-f408-4614-9f45-405414e4f90a)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
2025-12-25 18:47:53,975 - services.ai_providers.image.huggingface_inpainting_hub_provider - WARNING - âš ï¸ ç¬¬1æ¬¡å¤±è´¥ï¼Œ20ç§’åé‡è¯•...
2025-12-25 18:48:13,976 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ Hugging Face Hub Inference API
2025-12-25 18:48:13,976 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“¦ å‡†å¤‡å›¾ç‰‡...
2025-12-25 18:48:14,038 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - è°ƒæ•´å›¾ç‰‡å¤§å°: (1024, 571)
2025-12-25 18:48:14,059 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âœ… å›¾ç‰‡å‡†å¤‡å®Œæˆ: å°ºå¯¸=(1024, 571)
2025-12-25 18:48:14,059 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“ Prompt: clean background, natural, high quality, seamless
2025-12-25 18:48:14,059 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âš™ï¸ è°ƒç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting
2025-12-25 18:48:14,711 - httpx - INFO - HTTP Request: GET https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping "HTTP/1.1 401 Unauthorized"
2025-12-25 18:48:14,713 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ Inpainting å¤±è´¥: 401 Client Error. (Request ID: Root=1-694d166e-29d202bf494ad3355a11f8b4;7be462d4-e3ff-48ea-ab1f-687f66ee8504)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 657, in hf_raise_for_status
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/backend/services/ai_providers/image/huggingface_inpainting_hub_provider.py", line 119, in inpaint_image
    result = self.client.image_to_image(
        image=processed_image,
    ...<6 lines>...
        strength=strength
    )
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_client.py", line 1329, in image_to_image
    provider_helper = get_provider_helper(self.provider, task="image-to-image", model=model_id)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/__init__.py", line 251, in get_provider_helper
    provider_mapping = _fetch_inference_provider_mapping(model)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/_common.py", line 347, in _fetch_inference_provider_mapping
    info = HfApi().model_info(model, expand=["inferenceProviderMapping"])
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_validators.py", line 89, in _inner_fn
    return fn(*args, **kwargs)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/hf_api.py", line 2626, in model_info
    hf_raise_for_status(r)
    ~~~~~~~~~~~~~~~~~~~^^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 710, in hf_raise_for_status
    raise _format(RepositoryNotFoundError, message, response) from e
huggingface_hub.errors.RepositoryNotFoundError: 401 Client Error. (Request ID: Root=1-694d166e-29d202bf494ad3355a11f8b4;7be462d4-e3ff-48ea-ab1f-687f66ee8504)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
2025-12-25 18:48:14,725 - services.ai_providers.image.huggingface_inpainting_hub_provider - WARNING - âš ï¸ ç¬¬2æ¬¡å¤±è´¥ï¼Œ40ç§’åé‡è¯•...
2025-12-25 18:48:54,725 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ Hugging Face Hub Inference API
2025-12-25 18:48:54,725 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“¦ å‡†å¤‡å›¾ç‰‡...
2025-12-25 18:48:54,774 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - è°ƒæ•´å›¾ç‰‡å¤§å°: (1024, 571)
2025-12-25 18:48:54,797 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âœ… å›¾ç‰‡å‡†å¤‡å®Œæˆ: å°ºå¯¸=(1024, 571)
2025-12-25 18:48:54,797 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“ Prompt: clean background, natural, high quality, seamless
2025-12-25 18:48:54,797 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âš™ï¸ è°ƒç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting
2025-12-25 18:48:55,969 - httpx - INFO - HTTP Request: GET https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping "HTTP/1.1 401 Unauthorized"
2025-12-25 18:48:55,969 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ Inpainting å¤±è´¥: 401 Client Error. (Request ID: Root=1-694d1697-2e7a811022b085a84f13db13;432108b2-9239-4b71-a7d2-2ee848aa30c0)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 657, in hf_raise_for_status
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/backend/services/ai_providers/image/huggingface_inpainting_hub_provider.py", line 119, in inpaint_image
    result = self.client.image_to_image(
        image=processed_image,
    ...<6 lines>...
        strength=strength
    )
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_client.py", line 1329, in image_to_image
    provider_helper = get_provider_helper(self.provider, task="image-to-image", model=model_id)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/__init__.py", line 251, in get_provider_helper
    provider_mapping = _fetch_inference_provider_mapping(model)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/_common.py", line 347, in _fetch_inference_provider_mapping
    info = HfApi().model_info(model, expand=["inferenceProviderMapping"])
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_validators.py", line 89, in _inner_fn
    return fn(*args, **kwargs)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/hf_api.py", line 2626, in model_info
    hf_raise_for_status(r)
    ~~~~~~~~~~~~~~~~~~~^^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 710, in hf_raise_for_status
    raise _format(RepositoryNotFoundError, message, response) from e
huggingface_hub.errors.RepositoryNotFoundError: 401 Client Error. (Request ID: Root=1-694d1697-2e7a811022b085a84f13db13;432108b2-9239-4b71-a7d2-2ee848aa30c0)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
2025-12-25 18:48:55,978 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ 3æ¬¡å°è¯•å…¨éƒ¨å¤±è´¥
2025-12-25 18:48:56,371 - services.inpainting_service - INFO - åˆå§‹åŒ– Inpainting æœåŠ¡ï¼Œprovider: huggingface
2025-12-25 18:48:56,371 - services.inpainting_service - INFO - ä½¿ç”¨ Hugging Face Hub åœ¨çº¿æ¨ç†
2025-12-25 18:48:56,371 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - Hugging Face Inpainting Hub Provider åˆå§‹åŒ– (æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting)
2025-12-25 18:48:56,372 - services.inpainting_service - INFO - å¼€å§‹å¤„ç†å›¾åƒæ¶ˆé™¤ï¼ŒåŸå§‹ bbox æ•°é‡: 2
2025-12-25 18:48:56,372 - utils.mask_utils - INFO - åˆå¹¶è¾¹ç•Œæ¡†ï¼š2 -> 2
2025-12-25 18:48:56,372 - services.inpainting_service - INFO - åˆå¹¶å bbox æ•°é‡: 2
2025-12-25 18:48:56,378 - utils.mask_utils - INFO - åˆ›å»ºæ©ç å›¾åƒï¼Œå°ºå¯¸: (2752, 1536), bboxæ•°é‡: 2
2025-12-25 18:48:56,379 - utils.mask_utils - INFO - æ·»åŠ äº† 2 ä¸ªbboxçš„mask:
2025-12-25 18:48:56,379 - utils.mask_utils - INFO -   [1] åŸå§‹: (100, 100, 400, 300) -> æ‰©å±•å: (90, 90, 410, 310) å°ºå¯¸: 320x220
2025-12-25 18:48:56,379 - utils.mask_utils - INFO -   [2] åŸå§‹: (500, 200, 800, 400) -> æ‰©å±•å: (490, 190, 810, 410) å°ºå¯¸: 320x220
2025-12-25 18:48:56,379 - utils.mask_utils - INFO - æ©ç å›¾åƒåˆ›å»ºå®Œæˆ
2025-12-25 18:48:56,379 - services.inpainting_service - INFO - æ©ç å›¾åƒå·²ç”Ÿæˆï¼Œå°ºå¯¸: (2752, 1536)
2025-12-25 18:48:56,429 - services.inpainting_service - INFO - ğŸ“· Maskå›¾åƒå·²ä¿å­˜: /mnt/d/Desktop/banana-slides/backend/test_output/test_mask_service_api.png
2025-12-25 18:48:56,429 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ Hugging Face Hub Inference API
2025-12-25 18:48:56,429 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“¦ å‡†å¤‡å›¾ç‰‡...
2025-12-25 18:48:56,530 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - è°ƒæ•´å›¾ç‰‡å¤§å°: (1024, 571)
2025-12-25 18:48:56,580 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âœ… å›¾ç‰‡å‡†å¤‡å®Œæˆ: å°ºå¯¸=(1024, 571)
2025-12-25 18:48:56,580 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“ Prompt: high quality, detailed, natural, seamless
2025-12-25 18:48:56,580 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âš™ï¸ è°ƒç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting
2025-12-25 18:48:56,926 - httpx - INFO - HTTP Request: GET https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping "HTTP/1.1 401 Unauthorized"
2025-12-25 18:48:56,926 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ Inpainting å¤±è´¥: 401 Client Error. (Request ID: Root=1-694d1698-53f935412000edaa5c13b9e6;fafc72f3-465a-4696-81cd-d1f2403e2439)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 657, in hf_raise_for_status
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/backend/services/ai_providers/image/huggingface_inpainting_hub_provider.py", line 119, in inpaint_image
    result = self.client.image_to_image(
        image=processed_image,
    ...<6 lines>...
        strength=strength
    )
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_client.py", line 1329, in image_to_image
    provider_helper = get_provider_helper(self.provider, task="image-to-image", model=model_id)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/__init__.py", line 251, in get_provider_helper
    provider_mapping = _fetch_inference_provider_mapping(model)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/_common.py", line 347, in _fetch_inference_provider_mapping
    info = HfApi().model_info(model, expand=["inferenceProviderMapping"])
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_validators.py", line 89, in _inner_fn
    return fn(*args, **kwargs)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/hf_api.py", line 2626, in model_info
    hf_raise_for_status(r)
    ~~~~~~~~~~~~~~~~~~~^^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 710, in hf_raise_for_status
    raise _format(RepositoryNotFoundError, message, response) from e
huggingface_hub.errors.RepositoryNotFoundError: 401 Client Error. (Request ID: Root=1-694d1698-53f935412000edaa5c13b9e6;fafc72f3-465a-4696-81cd-d1f2403e2439)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
2025-12-25 18:48:56,935 - services.ai_providers.image.huggingface_inpainting_hub_provider - WARNING - âš ï¸ ç¬¬1æ¬¡å¤±è´¥ï¼Œ10ç§’åé‡è¯•...
2025-12-25 18:49:06,936 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ Hugging Face Hub Inference API
2025-12-25 18:49:06,936 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“¦ å‡†å¤‡å›¾ç‰‡...
2025-12-25 18:49:06,987 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - è°ƒæ•´å›¾ç‰‡å¤§å°: (1024, 571)
2025-12-25 18:49:07,045 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âœ… å›¾ç‰‡å‡†å¤‡å®Œæˆ: å°ºå¯¸=(1024, 571)
2025-12-25 18:49:07,045 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“ Prompt: high quality, detailed, natural, seamless
2025-12-25 18:49:07,045 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âš™ï¸ è°ƒç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting
2025-12-25 18:49:07,598 - httpx - INFO - HTTP Request: GET https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping "HTTP/1.1 401 Unauthorized"
2025-12-25 18:49:07,598 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ Inpainting å¤±è´¥: 401 Client Error. (Request ID: Root=1-694d16a3-56d998e6090f547d627e4ad5;1416f6d9-0b98-4a62-bb54-445e1cdf2579)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 657, in hf_raise_for_status
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/backend/services/ai_providers/image/huggingface_inpainting_hub_provider.py", line 119, in inpaint_image
    result = self.client.image_to_image(
        image=processed_image,
    ...<6 lines>...
        strength=strength
    )
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_client.py", line 1329, in image_to_image
    provider_helper = get_provider_helper(self.provider, task="image-to-image", model=model_id)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/__init__.py", line 251, in get_provider_helper
    provider_mapping = _fetch_inference_provider_mapping(model)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/_common.py", line 347, in _fetch_inference_provider_mapping
    info = HfApi().model_info(model, expand=["inferenceProviderMapping"])
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_validators.py", line 89, in _inner_fn
    return fn(*args, **kwargs)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/hf_api.py", line 2626, in model_info
    hf_raise_for_status(r)
    ~~~~~~~~~~~~~~~~~~~^^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 710, in hf_raise_for_status
    raise _format(RepositoryNotFoundError, message, response) from e
huggingface_hub.errors.RepositoryNotFoundError: 401 Client Error. (Request ID: Root=1-694d16a3-56d998e6090f547d627e4ad5;1416f6d9-0b98-4a62-bb54-445e1cdf2579)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
2025-12-25 18:49:07,620 - services.ai_providers.image.huggingface_inpainting_hub_provider - WARNING - âš ï¸ ç¬¬2æ¬¡å¤±è´¥ï¼Œ20ç§’åé‡è¯•...
2025-12-25 18:49:27,620 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸš€ å¼€å§‹è°ƒç”¨ Hugging Face Hub Inference API
2025-12-25 18:49:27,620 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“¦ å‡†å¤‡å›¾ç‰‡...
2025-12-25 18:49:27,680 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - è°ƒæ•´å›¾ç‰‡å¤§å°: (1024, 571)
2025-12-25 18:49:27,741 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âœ… å›¾ç‰‡å‡†å¤‡å®Œæˆ: å°ºå¯¸=(1024, 571)
2025-12-25 18:49:27,742 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - ğŸ“ Prompt: high quality, detailed, natural, seamless
2025-12-25 18:49:27,742 - services.ai_providers.image.huggingface_inpainting_hub_provider - INFO - âš™ï¸ è°ƒç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting
2025-12-25 18:49:28,197 - httpx - INFO - HTTP Request: GET https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping "HTTP/1.1 401 Unauthorized"
2025-12-25 18:49:28,198 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ Inpainting å¤±è´¥: 401 Client Error. (Request ID: Root=1-694d16b7-61e05945722ef73e77514b4b;1fcc17da-b000-4564-9283-8c9aa6067774)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 657, in hf_raise_for_status
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/d/Desktop/banana-slides/backend/services/ai_providers/image/huggingface_inpainting_hub_provider.py", line 119, in inpaint_image
    result = self.client.image_to_image(
        image=processed_image,
    ...<6 lines>...
        strength=strength
    )
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_client.py", line 1329, in image_to_image
    provider_helper = get_provider_helper(self.provider, task="image-to-image", model=model_id)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/__init__.py", line 251, in get_provider_helper
    provider_mapping = _fetch_inference_provider_mapping(model)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/inference/_providers/_common.py", line 347, in _fetch_inference_provider_mapping
    info = HfApi().model_info(model, expand=["inferenceProviderMapping"])
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_validators.py", line 89, in _inner_fn
    return fn(*args, **kwargs)
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/hf_api.py", line 2626, in model_info
    hf_raise_for_status(r)
    ~~~~~~~~~~~~~~~~~~~^^^
  File "/mnt/d/Desktop/banana-slides/.venv/lib/python3.13/site-packages/huggingface_hub/utils/_http.py", line 710, in hf_raise_for_status
    raise _format(RepositoryNotFoundError, message, response) from e
huggingface_hub.errors.RepositoryNotFoundError: 401 Client Error. (Request ID: Root=1-694d16b7-61e05945722ef73e77514b4b;1fcc17da-b000-4564-9283-8c9aa6067774)

Repository Not Found for url: https://huggingface.co/api/models/stabilityai/stable-diffusion-2-inpainting?expand=inferenceProviderMapping.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated. For more details, see https://huggingface.co/docs/huggingface_hub/authentication
Invalid username or password.
2025-12-25 18:49:28,212 - services.ai_providers.image.huggingface_inpainting_hub_provider - ERROR - âŒ 3æ¬¡å°è¯•å…¨éƒ¨å¤±è´¥
2025-12-25 18:49:28,212 - services.inpainting_service - ERROR - å›¾åƒæ¶ˆé™¤å¤±è´¥
âœ“ å·²åŠ è½½ç¯å¢ƒå˜é‡: /mnt/d/Desktop/banana-slides/.env

================================================================================
Hugging Face Hub åœ¨çº¿æ¨ç†æµ‹è¯•å¥—ä»¶
================================================================================

[æµ‹è¯• 1/2] ç›´æ¥æµ‹è¯• Hugging Face Hub Provider

================================================================================
æµ‹è¯• Hugging Face Hub åœ¨çº¿æ¨ç†
================================================================================
âœ“ API Key: hf_CkeBCdR...
âœ“ æµ‹è¯•å›¾ç‰‡: /mnt/d/Desktop/banana-slides/uploads/38b5b085-5e54-41ec-b1c4-d242db4ae880/pages/57aad519-7524-40fd-a274-0524e9ffa105_v1.png
âœ“ å›¾ç‰‡å°ºå¯¸: (2752, 1536), æ¨¡å¼: RGB
âœ“ åˆ›å»ºæµ‹è¯• mask: ä¸­å¿ƒåŒºåŸŸ (100, 100, 2652, 1436)
âœ“ Mask å·²ä¿å­˜: /mnt/d/Desktop/banana-slides/backend/test_output/test_mask_api.png

åˆå§‹åŒ– Hugging Face Hub Provider...
âœ“ ä½¿ç”¨æ¨¡å‹: stabilityai/stable-diffusion-2-inpainting

å¼€å§‹åœ¨çº¿ inpainting...
æç¤º: é¦–æ¬¡è°ƒç”¨å¯èƒ½éœ€è¦ç­‰å¾…æ¨¡å‹åŠ è½½ï¼ˆçº¦20-60ç§’ï¼‰

âŒ Inpainting å¤±è´¥

[æµ‹è¯• 2/2] é€šè¿‡ InpaintingService æµ‹è¯•

================================================================================
æµ‹è¯• InpaintingService (ä½¿ç”¨ Hugging Face Hub)
================================================================================
âœ“ æµ‹è¯•å›¾ç‰‡: /mnt/d/Desktop/banana-slides/uploads/38b5b085-5e54-41ec-b1c4-d242db4ae880/pages/57aad519-7524-40fd-a274-0524e9ffa105_v1.png
âœ“ å›¾ç‰‡å°ºå¯¸: (2752, 1536), æ¨¡å¼: RGB
âœ“ è¦æ¶ˆé™¤çš„åŒºåŸŸæ•°é‡: 2
  bbox[1]: (100, 100, 400, 300)
  bbox[2]: (500, 200, 800, 400)

åˆå§‹åŒ– InpaintingService (provider=huggingface)...
âœ“ Service åˆå§‹åŒ–æˆåŠŸï¼Œprovider: huggingface

å¼€å§‹æ¶ˆé™¤åŒºåŸŸ...
æç¤º: é¦–æ¬¡è°ƒç”¨å¯èƒ½éœ€è¦ç­‰å¾…æ¨¡å‹åŠ è½½

âŒ åŒºåŸŸæ¶ˆé™¤å¤±è´¥

================================================================================
æµ‹è¯•ç»“æœæ±‡æ€»
================================================================================
âŒ å¤±è´¥ - ç›´æ¥æµ‹è¯• Hub Provider
âŒ å¤±è´¥ - InpaintingService æµ‹è¯•

âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥

å¸¸è§é—®é¢˜:
  1. æ¨¡å‹æ­£åœ¨åŠ è½½: ç­‰å¾…20-60ç§’åé‡è¯•
  2. API key æ— æ•ˆ: æ£€æŸ¥ HUGGINGFACE_API_KEY ç¯å¢ƒå˜é‡
  3. æ¨¡å‹ä¸å¯ç”¨: å°è¯•å…¶ä»–æ¨¡å‹ï¼ˆè§æ–‡æ¡£ï¼‰
